## Як працювати з міграціями бд

#### Виконання запитів
Разом з dev середовищем стартує докер контейнер [adminer](http://localhost:8090/) який дозволяє проглядати структуру бд та виконувати запити. По замовчуванню для залогінення потрібно ввести такі креденшили:
```
Username: root
Password: pass
```

#### Запуск існуючих міграцій
1. Зайти в нодівський докер
```
docker exec -it modular-gql-node sh
```
2. Виконати одну з наведених нижче команд:
    - *Up* міграція головної бази даних
    ```
    knex migrate:latest --env development
    ```
    - *Down* міграція головної бази даних
    ```
    knex migrate:rollback --env development
    ```
    - *Up* міграція бази даних для інтеграційного тестування
    ```
    knex migrate:latest --env integration-test
    ```
    - *Down* міграція бази даних для інтеграційного тестування
    ```
    knex migrate:rollback --env integration-test
    ```

#### Створення нової міграції
1. Зайти в нодівський докер
```
docker exec -it modular-gql-node sh
```
2. Виконати команду:
```
knex migrate:make name_of_new_migration
```
де name_of_new_migration унікальна назва нової міграції, яка коротко описує те, що буде в ній робитися.
3. В папці ./migrations створиться новий файл, в який треба додати код міграції в методи up та down. Міграції реалізовані з допомогою npm пакета knex, який має офіційну документацію. 